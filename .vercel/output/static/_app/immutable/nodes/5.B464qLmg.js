import{i as F}from"../chunks/D4x84G1m.js";import{k as X,p as K,s as q,l as E,m as u,x as a,n as r,y as e,g as s,o as v,v as O,w as M,t as $,z as w,ac as Y,aj as H,aD as Z}from"../chunks/C-vb7UTA.js";import{e as z,i as G}from"../chunks/CQZlqHx8.js";import{s as A,b as ee}from"../chunks/C7LEq8K3.js";import{B as ae}from"../chunks/CuMqdjUw.js";async function te(B,f,m,c,S,g){M(f,!0);try{const _=await(await fetch(`/analytics/trending_skills/${encodeURIComponent(m.aspirasi)}`)).json();M(c,_.topDemand||[],!0),M(S,_.rising||[],!0),M(g,_.articles||[],!0)}finally{M(f,!1)}}var se=u('<p class="text-foreground/70 mt-2">Loading insightsâ€¦</p>'),re=u('<li class="flex items-center justify-between bg-secondary/30 rounded px-3 py-2"><span> </span> <a class="text-sm text-primary underline" target="_blank">Find courses</a></li>'),ie=u('<li class="flex items-center justify-between bg-secondary/30 rounded px-3 py-2"><span> </span> <a class="text-sm text-primary underline" target="_blank">Find courses</a></li>'),le=u('<div class="text-xs text-foreground/70"> </div>'),ne=u('<li class="bg-secondary/30 rounded px-3 py-2"><a class="underline" target="_blank"> </a> <!></li>'),oe=u('<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-4"><div><h3 class="font-medium mb-2">Top 5 In-Demand Skills</h3> <ul class="space-y-1"></ul></div> <div><h3 class="font-medium mb-2">Top 3 Rising Skills</h3> <ul class="space-y-1"></ul></div> <div><h3 class="font-medium mb-2">Recommended Reading</h3> <ul class="space-y-1"></ul></div></div>'),de=u('<div class="mt-10"><div class="flex items-center justify-between"><h2 class="text-xl font-semibold">Market Insights</h2> <button class="text-sm underline">Refresh</button></div> <!></div>');function J(B,f){K(f,!0);let m=q(!1),c=q(E([])),S=q(E([])),g=q(E([]));var x=de(),_=a(x),C=r(a(_),2);C.__click=[te,m,f,c,S,g],e(_);var P=r(_,2);{var T=b=>{var k=se();v(b,k)},N=b=>{var k=oe(),L=a(k),U=r(a(L),2);z(U,21,()=>s(c),G,(p,d)=>{var l=re(),i=a(l),D=a(i,!0);e(i);var y=r(i,2);e(l),$(j=>{w(D,s(d).skill_name),A(y,"href",j)},[()=>`https://www.google.com/search?q=${encodeURIComponent(s(d).skill_name+" course")}`]),v(p,l)}),e(U),e(L);var t=r(L,2),n=r(a(t),2);z(n,21,()=>s(S),G,(p,d)=>{var l=ie(),i=a(l),D=a(i,!0);e(i);var y=r(i,2);e(l),$(j=>{w(D,s(d).skill_name),A(y,"href",j)},[()=>`https://www.google.com/search?q=${encodeURIComponent(s(d).skill_name+" course")}`]),v(p,l)}),e(n),e(t);var o=r(t,2),h=r(a(o),2);z(h,21,()=>s(g),G,(p,d)=>{var l=ne(),i=a(l),D=a(i,!0);e(i);var y=r(i,2);{var j=R=>{var I=le(),V=a(I,!0);e(I),$(W=>w(V,W),[()=>new Date(s(d).published_at).toLocaleDateString()]),v(R,I)};F(y,R=>{s(d).published_at&&R(j)})}e(l),$(()=>{A(i,"href",s(d).url||"#"),w(D,s(d).title)}),v(p,l)}),e(h),e(o),e(k),v(b,k)};F(P,b=>{s(m)?b(T):b(N,!1)})}e(x),v(B,x),O()}X(["click"]);var ve=u('<a class="block p-4 rounded-lg bg-secondary/30 hover:bg-secondary/50 transition-colors border border-secondary relative"><div class="flex justify-between items-center"><div><h3 class="font-medium text-foreground"> </h3> <p class="text-sm text-foreground/70 mt-1"> </p></div> <div class="flex items-center gap-2"><span> </span> <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-primary/10 text-primary">View Details</span></div></div></a>'),ce=u('<div class="mt-4 space-y-4"></div>'),ue=u('<p class="mt-4 text-foreground/70">Anda belum memiliki pengajuan. Mulai buat sekarang!</p>'),me=u('<div class="p-8"><h1 class="text-3xl font-bold text-primary">Welcome to your Dashboard</h1> <p class="text-lg text-foreground/80 mt-1"> </p> <div class="mt-8"><div class="flex justify-between items-center"><h2 class="text-xl font-semibold">My IDP Submissions</h2></div> <!> <!></div> <!></div>');function be(B,f){K(f,!0);const{session:m,submissions:c}=f.data;function S(t){switch(t){case"Submitted":return"bg-blue-500/20 text-blue-300";case"Analyzing":return"bg-yellow-500/20 text-yellow-300";case"Complete":return"bg-green-500/20 text-green-300";default:return""}}var g=me(),x=r(a(g),2),_=a(x);e(x);var C=r(x,2),P=r(a(C),2);{var T=t=>{var n=ce();z(n,21,()=>c,o=>o.id,(o,h)=>{var p=ve(),d=a(p),l=a(d),i=a(l),D=a(i,!0);e(i);var y=r(i,2),j=a(y);e(y),e(l);var R=r(l,2),I=a(R),V=a(I,!0);e(I),H(2),e(R),e(d),e(p),$((W,Q)=>{A(p,"href",`/submission/${s(h).id??""}`),w(D,s(h).full_name),w(j,`Submitted on: ${W??""}`),ee(I,1,Q),w(V,s(h).status)},[()=>new Date(s(h).created_at).toLocaleDateString(),()=>`px-2 py-0.5 text-xs font-semibold rounded-full ${S(s(h).status)}`]),v(o,p)}),e(n),v(t,n)},N=t=>{var n=ue();v(t,n)};F(P,t=>{c&&c.length>0?t(T):t(N,!1)})}var b=r(P,2);{var k=t=>{J(t,{get aspirasi(){return m.user.user_metadata.aspirations}})},L=t=>{{let n=Z(()=>{var o;return((o=c==null?void 0:c[0])==null?void 0:o.research_interest)||"engineering"});J(t,{get aspirasi(){return s(n)}})}};F(b,t=>{var n,o;(o=(n=m==null?void 0:m.user)==null?void 0:n.user_metadata)!=null&&o.aspirations?t(k):t(L,!1)})}e(C);var U=r(C,2);ae(U,{href:"/",variant:"primary",children:(t,n)=>{H();var o=Y("Create New IDP Submission");v(t,o)},$$slots:{default:!0}}),e(g),$(()=>w(_,`Logged in as: ${m.user.email??""}`)),v(B,g),O()}export{be as component};
