import{ad as g,ae as b,u as y,r as i,A as S,O as _,af as A,ag as E,ah as q,q as k}from"./C-vb7UTA.js";function V(e,c,r=c){var s=g(),v=new WeakSet;b(e,"input",f=>{var a=f?e.defaultValue:e.value;if(a=h(e)?n(a):a,r(a),_!==null&&v.add(_),s&&a!==(a=c())){var t=e.selectionStart,d=e.selectionEnd;e.value=a??"",d!==null&&(e.selectionStart=t,e.selectionEnd=Math.min(d,e.value.length))}}),(S&&e.defaultValue!==e.value||y(c)==null&&e.value)&&(r(h(e)?n(e.value):e.value),_!==null&&v.add(_)),i(()=>{var f=c();if(e===document.activeElement){var a=A??_;if(v.has(a))return}h(e)&&f===n(e.value)||e.type==="date"&&!f&&!e.value||f!==e.value&&(e.value=f??"")})}const u=new Set;function C(e,c,r,s,v=s){var f=r.getAttribute("type")==="checkbox",a=e;let t=!1;if(c!==null)for(var d of c)a=a[d]??(a[d]=[]);a.push(r),b(r,"change",()=>{var l=r.__value;f&&(l=m(a,l,r.checked)),v(l)},()=>v(f?[]:null)),i(()=>{var l=s();if(S&&r.defaultChecked!==r.checked){t=!0;return}f?(l=l||[],r.checked=l.includes(r.__value)):r.checked=E(r.__value,l)}),q(()=>{var l=a.indexOf(r);l!==-1&&a.splice(l,1)}),u.has(a)||(u.add(a),k(()=>{a.sort((l,o)=>l.compareDocumentPosition(o)===4?-1:1),u.delete(a)})),k(()=>{if(t){var l;if(f)l=m(a,l,r.checked);else{var o=a.find(w=>w.checked);l=o==null?void 0:o.__value}v(l)}})}function m(e,c,r){for(var s=new Set,v=0;v<e.length;v+=1)e[v].checked&&s.add(e[v].__value);return r||s.delete(c),Array.from(s)}function h(e){var c=e.type;return c==="number"||c==="range"}function n(e){return e===""?null:+e}export{C as a,V as b};
